<!-- Compiled and minified CSS -->


<html>

<head>
  <title id='pillinn'>Multitube web</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
  <link rel="icon" href="--rootpath--/imgs/icon.png">
</head>

<link href="--rootpath--/css/icon.css" rel="stylesheet">
<link rel='stylesheet' href="--rootpath--/css/materialize.min.css">
<link rel='stylesheet' href="--rootpath--/css/player.css">
<link rel='stylesheet' href="--rootpath--/css/roboto.css">
<link rel='stylesheet' href="--rootpath--/css/materialdesignicons.min.css">


<body style="margin-top: 65px;">
  <div id="app">
    <nav-bar></nav-bar>
    <library style="width:100vw;"></library> 
    <player></player>
    <div style="position: fixed;bottom:0px;z-index:9999;">
      <bottom-bar style="width:100%;"></bottom-bar>
    </div>
  </div>
  <img id='hiddenforever' style="display:none;">
</body>

<script src='--rootpath--/js/vue.js'></script>
<script src='--rootpath--/js/httpVueLoader.js'></script>
<script src='--rootpath--/js/axios.js'></script>
<script src='--rootpath--/js/materialize.min.js'></script>
<script src='--rootpath--/js/color-thief.js'></script>
<script src='--rootpath--/js/player.js'></script>

</html>

<style>
  .two-line-ellipsis {
    padding-left: 2vw;
    text-overflow: ellipsis;
    overflow: hidden;
    width: 325px;
    line-height: 25px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    padding-top: 15px;
  }

  @keyframes floating {
    from {
      transform: translate(0, 0px);
    }

    65% {
      transform: translate(0, 15px);
    }

    to {
      transform: translate(0, -0px);
    }
  }

  @keyframes entrada {

    from {

      opacity: 0;

    }

    to {
      opacity: 100;

    }
  }
</style>

<script>
  var store = {
    state: {
      music: [],
      videos: [],
      selectedType: "mp3",
      filter: "",
      playingElement: null
    },
    playNext() {
      let currentIndex = -1;
      let elements = [];
      if (this.state.selectedType == "mp3") {
        elements = this.state.music;
      } else {
        elements = this.state.videos;
      }
      currentIndex = elements.findIndex(ax => ax.link == this.state.playingElement.link);
      if (currentIndex >= 0) {
        this.state.playingElement = elements[currentIndex + 1];
      }
    },
    playPrevious() {
      let currentIndex = -1;
      let elements = [];
      if (this.state.selectedType == "mp3") {
        elements = this.state.music;
      } else {
        elements = this.state.videos;
      }
      currentIndex = elements.findIndex(ax => ax.link == this.state.playingElement.link);
      if (currentIndex > 0) {
        this.state.playingElement = elements[currentIndex - 1];
      }
    },
    playElement(element) {
      this.state.playingElement = element;
    },
    updateMediaSession() {
      if ('mediaSession' in navigator) {

        navigator.mediaSession.metadata = new MediaMetadata({
          title: this.state.playingElement.name,
          artist: this.state.playingElement.link,

          artwork: [{
              src: this.state.playingElement.image,
              sizes: '96x96',
              type: 'image/png'
            },
            {
              src: this.state.playingElement.image,
              sizes: '128x128',
              type: 'image/png'
            },
            {
              src: this.state.playingElement.image,
              sizes: '192x192',
              type: 'image/png'
            },
            {
              src: this.state.playingElement.image,
              sizes: '256x256',
              type: 'image/png'
            },
            {
              src: this.state.playingElement.image,
              sizes: '384x384',
              type: 'image/png'
            },
            {
              src: this.state.playingElement.image,
              sizes: '512x512',
              type: 'image/png'
            },
          ]
        });
      }
      navigator.mediaSession.setActionHandler('previoustrack', function () {
        this.playPrevious();
      });

      navigator.mediaSession.setActionHandler('nexttrack', function () {
        this.playNext();
      });
    }
  }
  new Vue({
    el: '#app',
    components: {
      'player': httpVueLoader('--rootpath--/components/Player.vue'),
      'nav-bar': httpVueLoader('--rootpath--/components/NavBar.vue'),
      'preloader': httpVueLoader('--rootpath--/components/Preloader.vue'),
      'library': httpVueLoader('--rootpath--/components/Library.vue'),
      'bottom-bar': httpVueLoader('--rootpath--/components/BottomBar.vue')
    }
  });
</script>

<script>
  var loaded = function () {
    var reqo = new XMLHttpRequest();
    reqo.open('GET', "/&&querry&&meconecte", true);
    reqo.send();

  }
  window.onload = loaded;
</script>